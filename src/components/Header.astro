---
import { t, getAlternateLocale, getLocalizedPath, type Locale } from '../i18n/utils';

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const ui = t(locale);
const altLocale = getAlternateLocale(locale);
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
// Strip base and locale prefix to get the page-relative path
const pathWithoutBase = Astro.url.pathname.replace(base, '');
const currentPath = pathWithoutBase.replace(`/${locale}`, '') || '/';
const altPath = getLocalizedPath(currentPath, altLocale);
---

<header class="sticky top-0 z-50 bg-warm-50/95 backdrop-blur-sm border-b border-warm-200">
  <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
    <!-- Logo / Name -->
    <a href={getLocalizedPath('/', locale)} class="flex items-center gap-2 group">
      <span class="text-2xl font-bold tracking-tight font-[Playfair_Display] text-brand-800 group-hover:text-brand-600 transition-colors">
        ColorEat
      </span>
    </a>

    <!-- Navigation -->
    <nav class="flex items-center gap-1 sm:gap-3">
      <a
        href={getLocalizedPath('/', locale)}
        class="px-3 py-2 text-sm font-medium text-warm-700 hover:text-brand-700 hover:bg-brand-50 rounded-lg transition-colors"
      >
        {ui.nav.home}
      </a>
      <a
        href={getLocalizedPath('/menu/', locale)}
        class="px-3 py-2 text-sm font-medium text-warm-700 hover:text-brand-700 hover:bg-brand-50 rounded-lg transition-colors"
      >
        {ui.nav.menu}
      </a>

      <!-- Language Switcher -->
      <a
        href={altPath}
        class="ml-1 sm:ml-2 px-3 py-1.5 text-xs font-semibold border border-warm-300 rounded-full hover:bg-brand-50 hover:border-brand-400 transition-colors"
        aria-label={`Switch to ${ui.language[altLocale]}`}
      >
        {altLocale === 'ua' ? 'UA' : 'EN'}
      </a>
    </nav>
  </div>
</header>
